{"version":3,"sources":["services/image-api.js","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Modal/Modal.jsx","App.js","index.js"],"names":["fetchOptions","API_KEY","MAIN_URL","PAGE","ITEMS_PER_PAGE","value","a","fetch","fetching","json","result","console","log","fetchImages","Searchbar","state","handleSubmit","props","onSubmit","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","ImageGalleryItem","src","alt","id","largeImage","onImageClick","width","height","onClick","ImageGallery","hits","map","hit","largeImageURL","webformatURL","tags","Button","onLoadMore","modalRoot","document","getElementById","Modal","handleKeydown","e","onClose","window","removeEventListener","createPortal","handleBackdropClick","modalImage","modalAlt","App","status","searchQuery","modal","setState","preventDefault","fetchingImages","then","res","catch","err","handleInputChange","target","prevState","finally","scrollTo","top","documentElement","scrollHeight","behavior","classList","contains","dataset","addEventListener","resetModal","code","length","color","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.d6a7ce43.chunk.js","sourcesContent":["export const fetchOptions = {\r\n    API_KEY: '22215457-d2e131747f34337528d5fbfaa',\r\n    MAIN_URL: 'https://pixabay.com/api/',\r\n    PAGE: 1,\r\n    ITEMS_PER_PAGE: 12,\r\n};\r\n\r\nasync function fetchImages(value) {\r\n    try {\r\n        const fetching = await fetch(\r\n            `${fetchOptions.MAIN_URL}?key=${fetchOptions.API_KEY}&q=${value}&page=${fetchOptions.PAGE}&image_type=photo&orientation=horizontal&per_page=${fetchOptions.ITEMS_PER_PAGE}`,\r\n        );\r\n        const result = await fetching.json();\r\n        return result;\r\n    } catch (error) {\r\n        console.log('Error', error);\r\n    }\r\n}\r\n\r\nexport default fetchImages;\r\n","import React, { Component } from 'react';\r\n\r\nclass Searchbar extends Component {\r\n    state = {};\r\n\r\n    handleSubmit = () => this.props.onSubmit;\r\n\r\n    render() {\r\n        return (\r\n            <header className=\"Searchbar\">\r\n                <form className=\"SearchForm\" onSubmit={this.handleSubmit()}>\r\n                    <button type=\"submit\" className=\"SearchForm-button\">\r\n                        <span className=\"SearchForm-button-label\">Search</span>\r\n                    </button>\r\n\r\n                    <input\r\n                        className=\"SearchForm-input\"\r\n                        type=\"text\"\r\n                        autoComplete=\"off\"\r\n                        autoFocus\r\n                        placeholder=\"Search images and photos\"\r\n                        onChange={this.props.onChange}\r\n                    />\r\n                </form>\r\n            </header>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Searchbar;\r\n","const ImageGalleryItem = ({ src, alt, id, largeImage, onImageClick }) => {\r\n    return (\r\n        <>\r\n            <li className=\"ImageGalleryItem\" key={id}>\r\n                <img\r\n                    src={src}\r\n                    data-modal={largeImage}\r\n                    alt={alt}\r\n                    width=\"300\"\r\n                    height=\"300\"\r\n                    className=\"ImageGalleryItem-image\"\r\n                    onClick={onImageClick}\r\n                />\r\n            </li>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ImageGalleryItem;\r\n","import ImageGalleryItem from '../ImageGalleryItem';\r\n\r\nconst ImageGallery = ({ hits, onImageClick }) => {\r\n    return (\r\n        <ul className=\"ImageGallery\">\r\n            {hits.map(hit => (\r\n                <ImageGalleryItem\r\n                    largeImage={hit.largeImageURL}\r\n                    key={hit.id}\r\n                    src={hit.webformatURL}\r\n                    alt={hit.tags}\r\n                    onImageClick={onImageClick}\r\n                />\r\n            ))}\r\n        </ul>\r\n    );\r\n};\r\n\r\nexport default ImageGallery;\r\n","const Button = ({ onLoadMore }) => {\r\n    return (\r\n        <>\r\n            <button className=\"Button\" type=\"button\" onClick={onLoadMore}>\r\n                Load more\r\n            </button>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Button;\r\n","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\nconst modalRoot = document.getElementById('modal-root');\r\n\r\nclass Modal extends Component {\r\n    componentWillUnmount() {\r\n        window.removeEventListener('keydown', this.handleKeydown);\r\n    }\r\n\r\n    handleKeydown = e => {\r\n        this.props.onClose();\r\n    };\r\n\r\n    render() {\r\n        return createPortal(\r\n            <div\r\n                className=\"Overlay\"\r\n                onClose={this.handleKeydown}\r\n                onClick={this.props.handleBackdropClick}\r\n            >\r\n                <div className=\"Modal\">\r\n                    <img\r\n                        src={this.props.modalImage}\r\n                        alt={this.props.modalAlt}\r\n                    />\r\n                </div>\r\n            </div>,\r\n            modalRoot,\r\n        );\r\n    }\r\n}\r\n\r\nexport default Modal;\r\n","import React, { Component } from 'react';\nimport Loader from 'react-loader-spinner';\nimport fetchingImages from './services/image-api';\nimport { fetchOptions } from './services/image-api';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Button from './components/Button';\nimport Modal from './components/Modal';\n\nclass App extends Component {\n    state = {\n        status: '',\n        searchQuery: '',\n        hits: null,\n        modal: false,\n        modalImage: '',\n        modalAlt: '',\n    };\n\n    handleSubmit = e => {\n        this.setState({ status: 'pending' });\n        e.preventDefault();\n        fetchOptions.PAGE = 1;\n        fetchingImages(this.state.searchQuery)\n            .then(\n                res => this.setState({ hits: res.hits }),\n                this.setState({ status: 'resolved' }),\n            )\n            .catch(err => {\n                this.setState({ status: 'rejected' });\n                console.log(err);\n            });\n    };\n\n    handleInputChange = e => {\n        this.setState({ searchQuery: e.target.value });\n    };\n\n    onLoadMore = () => {\n        this.setState({ status: 'pending' });\n        fetchOptions.PAGE += 1;\n        fetchingImages(this.state.searchQuery)\n            .then(res =>\n                this.setState(prevState => {\n                    return {\n                        hits: [...prevState.hits, ...res.hits],\n                    };\n                }),\n            )\n            .catch(err => {\n                console.log(err);\n            })\n            .finally(() => {\n                window.scrollTo({\n                    top: document.documentElement.scrollHeight,\n                    behavior: 'smooth',\n                });\n            });\n        this.setState({ status: 'resolved' });\n    };\n\n    onImageClick = e => {\n        console.log(e.target.alt);\n        if (!e.target.classList.contains('ImageGalleryItem-image')) return;\n        this.setState({\n            modalImage: e.target.dataset.modal,\n            modal: true,\n            modalAlt: e.target.alt,\n        });\n        window.addEventListener('keydown', this.handleKeydown);\n    };\n\n    handleBackdropClick = e => {\n        if (e.target.classList.contains('Overlay')) this.resetModal();\n        return;\n    };\n\n    handleKeydown = e => {\n        if (e.code === 'Escape') this.resetModal();\n    };\n\n    resetModal = () => {\n        this.setState({ modalImage: '', modal: false, modalAlt: '' });\n    };\n\n    render() {\n        const { hits, modal, status, modalAlt, modalImage } = this.state;\n        const {\n            handleSubmit,\n            handleInputChange,\n            onImageClick,\n            onLoadMore,\n            handleKeydown,\n            handleBackdropClick,\n        } = this;\n        return (\n            <>\n                <Searchbar\n                    onSubmit={handleSubmit}\n                    onChange={handleInputChange}\n                />\n                {hits && (\n                    <ImageGallery onImageClick={onImageClick} hits={hits} />\n                )}\n                {hits && hits.length > 0 && <Button onLoadMore={onLoadMore} />}\n                {modal && (\n                    <Modal\n                        modalAlt={modalAlt}\n                        modalImage={modalImage}\n                        onClose={handleKeydown}\n                        handleBackdropClick={handleBackdropClick}\n                    />\n                )}\n                {status === 'pending' && (\n                    <Loader\n                        className=\"spinner\"\n                        type=\"TailSpin\"\n                        color=\"#00BFFF\"\n                        height={100}\n                        width={100}\n                    />\n                )}\n            </>\n        );\n    }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n"],"sourceRoot":""}