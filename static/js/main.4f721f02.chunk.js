(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{39:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(7),c=a.n(r),s=a(10),l=a(3),i=a(4),u=a(6),d=a(5),h=a(11),m=a.n(h),p=a(9),g=a.n(p),j=a(12),b={API_KEY:"22215457-d2e131747f34337528d5fbfaa",MAIN_URL:"https://pixabay.com/api/",PAGE:1,ITEMS_PER_PAGE:12};function f(){return(f=Object(j.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(b.MAIN_URL,"?key=").concat(b.API_KEY,"&q=").concat(t,"&page=").concat(b.PAGE,"&image_type=photo&orientation=horizontal&per_page=").concat(b.ITEMS_PER_PAGE));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(e){return f.apply(this,arguments)},y=a(0),v=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={},e.handleSubmit=function(){return e.props.onSubmit},e}return Object(i.a)(a,[{key:"render",value:function(){return Object(y.jsx)("header",{className:"Searchbar",children:Object(y.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit(),children:[Object(y.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(y.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(y.jsx)("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:this.props.onChange})]})})}}]),a}(n.Component),I=function(e){var t=e.src,a=e.alt,n=e.id,o=e.largeImage,r=e.onImageClick;return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("li",{className:"ImageGalleryItem",children:Object(y.jsx)("img",{src:t,"data-modal":o,alt:a,width:"300",height:"300",className:"ImageGalleryItem-image",onClick:r})},n)})},x=function(e){var t=e.hits,a=e.onImageClick;return Object(y.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){return Object(y.jsx)(I,{largeImage:e.largeImageURL,src:e.webformatURL,alt:e.tags,onImageClick:a},e.id)}))})},k=function(e){var t=e.onLoadMore;return Object(y.jsx)(y.Fragment,{children:Object(y.jsx)("button",{className:"Button",type:"button",onClick:t,children:"Load more"})})},w=document.getElementById("modal-root"),S=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).handleKeydown=function(t){e.props.onClose()},e}return Object(i.a)(a,[{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeydown)}},{key:"render",value:function(){return Object(r.createPortal)(Object(y.jsx)("div",{className:"Overlay",onClose:this.handleKeydown,onClick:this.props.handleBackdropClick,children:Object(y.jsx)("div",{className:"Modal",children:Object(y.jsx)("img",{src:this.props.modalImage,alt:this.props.modalAlt})})}),w)}}]),a}(n.Component),C=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={status:"",searchQuery:"",hits:null,modal:!1,modalImage:"",modalAlt:""},e.handleInputChange=function(t){e.setState({searchQuery:t.target.value})},e.handleSubmit=function(t){t.preventDefault(),b.PAGE=1,O(e.state.searchQuery).then((function(t){return e.setState({hits:t.hits,status:"resolved"})})).then(e.setState({status:"pending"})).catch((function(t){e.setState({status:"rejected"}),console.log(t)})),console.log(e.state.status)},e.onLoadMore=function(){b.PAGE+=1,O(e.state.searchQuery).then((function(t){return e.setState((function(e){return{hits:[].concat(Object(s.a)(e.hits),Object(s.a)(t.hits)),status:"resolved"}}))})).then(e.setState({status:"pending"})).catch((function(e){return console.log(e)})).finally((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))},e.onImageClick=function(t){console.log(t.target.alt),t.target.classList.contains("ImageGalleryItem-image")&&(e.setState({modalImage:t.target.dataset.modal,modal:!0,modalAlt:t.target.alt}),window.addEventListener("keydown",e.handleKeydown))},e.handleBackdropClick=function(t){t.target.classList.contains("Overlay")&&e.resetModal()},e.handleKeydown=function(t){"Escape"===t.code&&e.resetModal()},e.resetModal=function(){e.setState({modalImage:"",modal:!1,modalAlt:""})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.hits,a=e.modal,n=e.status,o=e.modalAlt,r=e.modalImage,c=this.handleSubmit,s=this.handleInputChange,l=this.onImageClick,i=this.onLoadMore,u=this.handleKeydown,d=this.handleBackdropClick;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(v,{onSubmit:c,onChange:s}),t&&t.length>0&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(x,{onImageClick:l,hits:t}),Object(y.jsx)(k,{onLoadMore:i})]}),a&&Object(y.jsx)(S,{modalAlt:o,modalImage:r,onClose:u,handleBackdropClick:d}),"pending"===n&&Object(y.jsx)(m.a,{className:"spinner",type:"TailSpin",color:"#00BFFF",height:100,width:100})]})}}]),a}(n.Component);a(39),a(40);c.a.render(Object(y.jsx)(o.a.StrictMode,{children:Object(y.jsx)(C,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.4f721f02.chunk.js.map